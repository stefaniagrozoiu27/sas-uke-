#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2009.vpi";
S_0x5bf62f3e1440 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x5bf62f3f40e0 .scope module, "lerp" "lerp" 3 1;
 .timescale -9 -12;
    .port_info 0 /INPUT 32 "a";
    .port_info 1 /INPUT 32 "b";
    .port_info 2 /INPUT 32 "alpha";
    .port_info 3 /OUTPUT 32 "out";
P_0x5bf62f3c1e30 .param/l "W" 0 3 2, +C4<00000000000000000000000000100000>;
v0x5bf62f3f46b0_0 .net *"_ivl_10", 63 0, L_0x5bf62f41d040;  1 drivers
v0x5bf62f418770_0 .net *"_ivl_12", 33 0, L_0x5bf62f41cf10;  1 drivers
v0x5bf62f418850_0 .net/s *"_ivl_14", 63 0, L_0x5bf62f41d130;  1 drivers
v0x5bf62f418910_0 .net/s *"_ivl_2", 63 0, L_0x5bf62f41ca90;  1 drivers
v0x5bf62f4189f0_0 .net/s *"_ivl_4", 63 0, L_0x5bf62f41cbb0;  1 drivers
v0x5bf62f418ad0_0 .net/s *"_ivl_8", 63 0, L_0x5bf62f41ce20;  1 drivers
o0x72bdcfa8a138 .functor BUFZ 32, C4<zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz>; HiZ drive
v0x5bf62f418bb0_0 .net/s "a", 31 0, o0x72bdcfa8a138;  0 drivers
o0x72bdcfa8a168 .functor BUFZ 32, C4<zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz>; HiZ drive
v0x5bf62f418c90_0 .net "alpha", 31 0, o0x72bdcfa8a168;  0 drivers
o0x72bdcfa8a198 .functor BUFZ 32, C4<zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz>; HiZ drive
v0x5bf62f418d70_0 .net/s "b", 31 0, o0x72bdcfa8a198;  0 drivers
v0x5bf62f418e50_0 .net/s "diff", 31 0, L_0x5bf62f41c950;  1 drivers
v0x5bf62f418f30_0 .net/s "mult", 63 0, L_0x5bf62f41cc80;  1 drivers
v0x5bf62f419010_0 .net/s "out", 31 0, L_0x5bf62f41d2c0;  1 drivers
L_0x5bf62f41c950 .arith/sub 32, o0x72bdcfa8a198, o0x72bdcfa8a138;
L_0x5bf62f41ca90 .extend/s 64, L_0x5bf62f41c950;
L_0x5bf62f41cbb0 .extend/s 64, o0x72bdcfa8a168;
L_0x5bf62f41cc80 .arith/mult 64, L_0x5bf62f41ca90, L_0x5bf62f41cbb0;
L_0x5bf62f41ce20 .extend/s 64, o0x72bdcfa8a138;
L_0x5bf62f41cf10 .part L_0x5bf62f41cc80, 30, 34;
L_0x5bf62f41d040 .extend/s 64, L_0x5bf62f41cf10;
L_0x5bf62f41d130 .arith/sum 64, L_0x5bf62f41ce20, L_0x5bf62f41d040;
L_0x5bf62f41d2c0 .part L_0x5bf62f41d130, 0, 32;
S_0x5bf62f3f4330 .scope module, "tb_motion_corrector" "tb_motion_corrector" 4 3;
 .timescale -9 -12;
P_0x5bf62f3e1a10 .param/real "SCALE" 1 4 6, Cr<m4000000000000000gfd2>; value=65536.0
P_0x5bf62f3e1a50 .param/l "WP" 1 4 5, +C4<00000000000000000000000000100000>;
v0x5bf62f41ba60_0 .var/s "a_x", 31 0;
v0x5bf62f41bb90_0 .var/i "count", 31 0;
v0x5bf62f41bc70_0 .net/s "cx", 31 0, L_0x5bf62f41e230;  1 drivers
v0x5bf62f41bd40_0 .net/s "cy", 31 0, L_0x5bf62f41df10;  1 drivers
v0x5bf62f41be10_0 .net/s "cz", 31 0, L_0x5bf62f41c9f0;  1 drivers
v0x5bf62f41bf00_0 .var/s "dt", 31 0;
v0x5bf62f41bff0_0 .var/i "fin", 31 0;
v0x5bf62f41c0d0_0 .var/i "fout", 31 0;
v0x5bf62f41c1b0_0 .var/s "px", 31 0;
v0x5bf62f41c300_0 .var/s "py", 31 0;
v0x5bf62f41c3d0_0 .var/s "pz", 31 0;
v0x5bf62f41c4a0_0 .var/real "rdt", 0 0;
v0x5bf62f41c540_0 .var/real "rx", 0 0;
v0x5bf62f41c600_0 .var/real "ry", 0 0;
v0x5bf62f41c6c0_0 .var/real "rz", 0 0;
v0x5bf62f41c780_0 .net/s "v_next", 31 0, L_0x5bf62f41da60;  1 drivers
v0x5bf62f41c840_0 .var/s "v_prev", 31 0;
S_0x5bf62f419170 .scope module, "dut" "top_motion_corrector" 4 25, 5 1 0, S_0x5bf62f3f4330;
 .timescale -9 -12;
    .port_info 0 /INPUT 32 "px";
    .port_info 1 /INPUT 32 "py";
    .port_info 2 /INPUT 32 "pz";
    .port_info 3 /INPUT 32 "dt";
    .port_info 4 /INPUT 32 "a_x";
    .port_info 5 /INPUT 32 "v_prev";
    .port_info 6 /OUTPUT 32 "v_next";
    .port_info 7 /OUTPUT 32 "cx";
    .port_info 8 /OUTPUT 32 "cy";
    .port_info 9 /OUTPUT 32 "cz";
P_0x5bf62f419320 .param/l "WP" 0 5 2, +C4<00000000000000000000000000100000>;
L_0x5bf62f41df10 .functor BUFZ 32, v0x5bf62f41c300_0, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
L_0x5bf62f41c9f0 .functor BUFZ 32, v0x5bf62f41c3d0_0, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
v0x5bf62f41a8a0_0 .net/s "a_x", 31 0, v0x5bf62f41ba60_0;  1 drivers
v0x5bf62f41a980_0 .net/s "cx", 31 0, L_0x5bf62f41e230;  alias, 1 drivers
v0x5bf62f41aa40_0 .net/s "cy", 31 0, L_0x5bf62f41df10;  alias, 1 drivers
v0x5bf62f41ab30_0 .net/s "cz", 31 0, L_0x5bf62f41c9f0;  alias, 1 drivers
v0x5bf62f41ac10_0 .net/s "dt", 31 0, v0x5bf62f41bf00_0;  1 drivers
v0x5bf62f41acd0_0 .net/s "dx", 31 0, L_0x5bf62f41e070;  1 drivers
v0x5bf62f41ada0_0 .net/s "px", 31 0, v0x5bf62f41c1b0_0;  1 drivers
v0x5bf62f41ae60_0 .net/s "py", 31 0, v0x5bf62f41c300_0;  1 drivers
v0x5bf62f41af40_0 .net/s "pz", 31 0, v0x5bf62f41c3d0_0;  1 drivers
v0x5bf62f41b020_0 .net/s "v_next", 31 0, L_0x5bf62f41da60;  alias, 1 drivers
v0x5bf62f41b110_0 .net/s "v_prev", 31 0, v0x5bf62f41c840_0;  1 drivers
L_0x5bf62f41e230 .arith/sum 32, v0x5bf62f41c1b0_0, L_0x5bf62f41e070;
S_0x5bf62f419550 .scope module, "imu" "imu_integrator" 5 17, 6 1 0, S_0x5bf62f419170;
 .timescale -9 -12;
    .port_info 0 /INPUT 32 "a";
    .port_info 1 /INPUT 32 "dt";
    .port_info 2 /INPUT 32 "v_in";
    .port_info 3 /OUTPUT 32 "v_out";
    .port_info 4 /OUTPUT 32 "dp";
P_0x5bf62f419750 .param/l "WP" 0 6 2, +C4<00000000000000000000000000100000>;
v0x5bf62f4198a0_0 .net/s *"_ivl_0", 63 0, L_0x5bf62f41d3b0;  1 drivers
v0x5bf62f4199a0_0 .net *"_ivl_10", 47 0, L_0x5bf62f41d700;  1 drivers
v0x5bf62f419a80_0 .net/s *"_ivl_12", 63 0, L_0x5bf62f41d920;  1 drivers
v0x5bf62f419b70_0 .net/s *"_ivl_16", 63 0, L_0x5bf62f41dba0;  1 drivers
v0x5bf62f419c50_0 .net/s *"_ivl_18", 63 0, L_0x5bf62f41dc40;  1 drivers
v0x5bf62f419d80_0 .net/s *"_ivl_2", 63 0, L_0x5bf62f41d450;  1 drivers
v0x5bf62f419e60_0 .net *"_ivl_22", 63 0, L_0x5bf62f41df80;  1 drivers
v0x5bf62f419f40_0 .net *"_ivl_24", 47 0, L_0x5bf62f41de70;  1 drivers
v0x5bf62f41a020_0 .net/s *"_ivl_6", 63 0, L_0x5bf62f41d630;  1 drivers
v0x5bf62f41a100_0 .net *"_ivl_8", 63 0, L_0x5bf62f41d7f0;  1 drivers
v0x5bf62f41a1e0_0 .net/s "a", 31 0, v0x5bf62f41ba60_0;  alias, 1 drivers
v0x5bf62f41a2c0_0 .net/s "av", 63 0, L_0x5bf62f41d4f0;  1 drivers
v0x5bf62f41a3a0_0 .net/s "dp", 31 0, L_0x5bf62f41e070;  alias, 1 drivers
v0x5bf62f41a480_0 .net/s "dt", 31 0, v0x5bf62f41bf00_0;  alias, 1 drivers
v0x5bf62f41a560_0 .net/s "v_in", 31 0, v0x5bf62f41c840_0;  alias, 1 drivers
v0x5bf62f41a640_0 .net/s "v_out", 31 0, L_0x5bf62f41da60;  alias, 1 drivers
v0x5bf62f41a720_0 .net/s "vp", 63 0, L_0x5bf62f41ddd0;  1 drivers
L_0x5bf62f41d3b0 .extend/s 64, v0x5bf62f41ba60_0;
L_0x5bf62f41d450 .extend/s 64, v0x5bf62f41bf00_0;
L_0x5bf62f41d4f0 .arith/mult 64, L_0x5bf62f41d3b0, L_0x5bf62f41d450;
L_0x5bf62f41d630 .extend/s 64, v0x5bf62f41c840_0;
L_0x5bf62f41d700 .part L_0x5bf62f41d4f0, 16, 48;
L_0x5bf62f41d7f0 .extend/s 64, L_0x5bf62f41d700;
L_0x5bf62f41d920 .arith/sum 64, L_0x5bf62f41d630, L_0x5bf62f41d7f0;
L_0x5bf62f41da60 .part L_0x5bf62f41d920, 0, 32;
L_0x5bf62f41dba0 .extend/s 64, v0x5bf62f41c840_0;
L_0x5bf62f41dc40 .extend/s 64, v0x5bf62f41bf00_0;
L_0x5bf62f41ddd0 .arith/mult 64, L_0x5bf62f41dba0, L_0x5bf62f41dc40;
L_0x5bf62f41de70 .part L_0x5bf62f41ddd0, 16, 48;
L_0x5bf62f41df80 .extend/s 64, L_0x5bf62f41de70;
L_0x5bf62f41e070 .part L_0x5bf62f41df80, 0, 32;
S_0x5bf62f41b360 .scope function.real, "from_q16_16" "from_q16_16" 4 38, 4 38 0, S_0x5bf62f3f4330;
 .timescale -9 -12;
; Variable from_q16_16 is REAL return value of scope S_0x5bf62f41b360
v0x5bf62f41b5d0_0 .var/s "q", 31 0;
TD_tb_motion_corrector.from_q16_16 ;
    %load/vec4 v0x5bf62f41b5d0_0;
    %cvt/rv/s;
    %pushi/real 1073741824, 4082; load=65536.0
    %div/wr;
    %ret/real 0; Assign to from_q16_16
    %end;
S_0x5bf62f41b6b0 .scope function.vec4.u32, "to_q16_16" "to_q16_16" 4 34, 4 34 0, S_0x5bf62f3f4330;
 .timescale -9 -12;
v0x5bf62f41b8c0_0 .var/real "r", 0 0;
; Variable to_q16_16 is vec4 return value of scope S_0x5bf62f41b6b0
TD_tb_motion_corrector.to_q16_16 ;
    %load/real v0x5bf62f41b8c0_0;
    %pushi/real 1073741824, 4082; load=65536.0
    %mul/wr;
    %vpi_func 4 35 "$rtoi" 32, W<0,r> {0 1 0};
    %ret/vec4 0, 0, 32;  Assign to to_q16_16 (store_vec4_to_lval)
    %end;
    .scope S_0x5bf62f3f4330;
T_2 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x5bf62f41bb90_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x5bf62f41c840_0, 0, 32;
    %pushi/real 1610612736, 4066; load=1.50000
    %store/real v0x5bf62f41b8c0_0;
    %callf/vec4 TD_tb_motion_corrector.to_q16_16, S_0x5bf62f41b6b0;
    %store/vec4 v0x5bf62f41ba60_0, 0, 32;
    %vpi_func 4 49 "$fopen" 32, "data/input_points.txt", "r" {0 0 0};
    %store/vec4 v0x5bf62f41bff0_0, 0, 32;
    %load/vec4 v0x5bf62f41bff0_0;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_2.0, 4;
    %vpi_call/w 4 51 "$display", "ERROR: cannot open input_points.txt" {0 0 0};
    %vpi_call/w 4 52 "$finish" {0 0 0};
T_2.0 ;
    %vpi_func 4 55 "$fopen" 32, "data/imu_corrected_points.txt", "w" {0 0 0};
    %store/vec4 v0x5bf62f41c0d0_0, 0, 32;
    %vpi_call/w 4 56 "$fwrite", v0x5bf62f41c0d0_0, "# cx cy cz\012" {0 0 0};
T_2.2 ;
    %vpi_func 4 58 "$fscanf" 32, v0x5bf62f41bff0_0, "%f %f %f %f", v0x5bf62f41c540_0, v0x5bf62f41c600_0, v0x5bf62f41c6c0_0, v0x5bf62f41c4a0_0 {0 0 0};
    %cmpi/e 4, 0, 32;
    %jmp/0xz T_2.3, 4;
    %load/vec4 v0x5bf62f41bb90_0;
    %addi 1, 0, 32;
    %store/vec4 v0x5bf62f41bb90_0, 0, 32;
    %load/real v0x5bf62f41c540_0;
    %store/real v0x5bf62f41b8c0_0;
    %callf/vec4 TD_tb_motion_corrector.to_q16_16, S_0x5bf62f41b6b0;
    %store/vec4 v0x5bf62f41c1b0_0, 0, 32;
    %load/real v0x5bf62f41c600_0;
    %store/real v0x5bf62f41b8c0_0;
    %callf/vec4 TD_tb_motion_corrector.to_q16_16, S_0x5bf62f41b6b0;
    %store/vec4 v0x5bf62f41c300_0, 0, 32;
    %load/real v0x5bf62f41c6c0_0;
    %store/real v0x5bf62f41b8c0_0;
    %callf/vec4 TD_tb_motion_corrector.to_q16_16, S_0x5bf62f41b6b0;
    %store/vec4 v0x5bf62f41c3d0_0, 0, 32;
    %load/real v0x5bf62f41c4a0_0;
    %store/real v0x5bf62f41b8c0_0;
    %callf/vec4 TD_tb_motion_corrector.to_q16_16, S_0x5bf62f41b6b0;
    %store/vec4 v0x5bf62f41bf00_0, 0, 32;
    %delay 1000, 0;
    %load/vec4 v0x5bf62f41bc70_0;
    %store/vec4 v0x5bf62f41b5d0_0, 0, 32;
    %callf/real TD_tb_motion_corrector.from_q16_16, S_0x5bf62f41b360;
    %load/vec4 v0x5bf62f41bd40_0;
    %store/vec4 v0x5bf62f41b5d0_0, 0, 32;
    %callf/real TD_tb_motion_corrector.from_q16_16, S_0x5bf62f41b360;
    %load/vec4 v0x5bf62f41be10_0;
    %store/vec4 v0x5bf62f41b5d0_0, 0, 32;
    %callf/real TD_tb_motion_corrector.from_q16_16, S_0x5bf62f41b360;
    %vpi_call/w 4 68 "$fwrite", v0x5bf62f41c0d0_0, "%0.6f %0.6f %0.6f\012", W<2,r>, W<1,r>, W<0,r> {0 3 0};
    %load/vec4 v0x5bf62f41c780_0;
    %store/vec4 v0x5bf62f41c840_0, 0, 32;
    %jmp T_2.2;
T_2.3 ;
    %vpi_call/w 4 79 "$display", "Processed %0d points", v0x5bf62f41bb90_0 {0 0 0};
    %vpi_call/w 4 81 "$fclose", v0x5bf62f41bff0_0 {0 0 0};
    %vpi_call/w 4 82 "$fclose", v0x5bf62f41c0d0_0 {0 0 0};
    %vpi_call/w 4 83 "$display", "Wrote data/output_points.txt" {0 0 0};
    %vpi_call/w 4 85 "$finish" {0 0 0};
    %end;
    .thread T_2;
# The file index is used to find the file name in the following table.
:file_names 7;
    "N/A";
    "<interactive>";
    "-";
    "../rtl/point_processing/lerp.v";
    "tb/tb_motion_corrector.sv";
    "../rtl/top_motion_corrector.v";
    "../rtl/imu/imu_integrator.v";
